import{R as S,r as t,j as e,A as I}from"./index-BerIFk4f.js";const w=S.forwardRef((n,o)=>{console.log(n,"RefChild.tsx::4行");const c=()=>{console.log("doSomething","RefChild.tsx::5行")};return t.useImperativeHandle(o,()=>({doSomething:c})),e.jsx("div",{children:"this is RefChild"})}),A="/react-starter/assets/pix-Cqf_tP2M.png",M=(n,o)=>{let l={increment:i=>({count:n.count+i}),decrement:i=>({count:n.count-i})}[o.type];if(l)return{...n,...l(o.payload)};throw new Error("action type is undefined")},_=()=>{console.log("函数组件重新执行----");const[n,o]=t.useState(0),[c,l]=t.useState(Date.now()),i=t.useMemo(()=>(console.log("重新计算doubleCount"),n*2),[n]);t.useEffect(()=>{const s=setTimeout(()=>{console.log(n,"common-hooks.tsx::21行"),o(f=>(console.log(f,"common-hooks.tsx::23行"),f+1))},0);return o(n+1),()=>{console.log("页面卸载,移除定时器"),clearTimeout(s)}},[]);const j=()=>{let s=document.getElementById("test-img");s&&(s.style.width="300px",s.style.height="300px")};t.useEffect(()=>{console.log("useEffect执行")}),t.useLayoutEffect(()=>{console.log("useLayoutEffect执行"),j()});const p=t.useCallback(()=>{console.log(n)},[]),C=t.useCallback(()=>{console.log(c)},[n]),d=t.useRef(null),m=()=>{var s;(s=d.current)==null||s.doSomething()},u=t.useRef(null),g=()=>{var s;(s=u.current)==null||s.focus()};let h=1;const a=t.useRef(1),b=()=>{h++,a.current++},[r,k]=t.useReducer(M,{count:0,name:"jack"}),v=()=>{k({type:"increment",payload:1})},R=()=>{console.log(r,"common-hooks.tsx::134行")},{appConfig:x,updateAppConfig:y}=t.useContext(I),E=()=>{y({isSidebarOpen:!x.isSidebarOpen})};return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("label",{children:["时间:",c]}),e.jsx("button",{onClick:()=>l(Date.now()),children:"更新时间"})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"1.useState"}),e.jsxs("label",{children:["useState-",n]}),e.jsx("button",{onClick:()=>o(n+1),children:"设置count"})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"2.useMemo"}),e.jsxs("label",{children:["doubleCount:",i]})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"3.useCallback"}),e.jsx("button",{onClick:p,children:"测试useCallback"}),e.jsx("button",{onClick:C,children:"测试useCallback2"})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"4.useRef"}),e.jsx(w,{ref:d}),e.jsx("button",{onClick:m,children:"执行RefChild的方法"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",ref:u}),e.jsx("button",{onClick:g,children:"输入框聚焦"})]}),e.jsxs("div",{children:[e.jsxs("div",{children:["函数里常规变量:",h]}),e.jsxs("div",{children:["ref定义的变量:",a.current]}),e.jsx("button",{onClick:b,children:"递增"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"5.useEffectLayout Vs useEffect"}),e.jsx("div",{children:e.jsx("img",{src:A,id:"test-img"})})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"6.useReducer"}),e.jsxs("div",{children:[e.jsxs("div",{children:["reducerInfo-",r.count]}),e.jsxs("div",{children:["reducerInfo-",r.name]}),e.jsx("button",{onClick:v,children:"触发reducer的dispatch"}),e.jsx("button",{onClick:R,children:"查询reducer的状态"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{children:"7.useContext"}),e.jsxs("div",{children:[e.jsxs("div",{children:["appConfig-",""+x.isSidebarOpen]}),e.jsx("button",{onClick:E,children:"触发reducer的dispatch"})]})]})]})};export{_ as default};
